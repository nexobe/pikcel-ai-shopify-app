# AI Image Editor - Visual Flow Diagram

## ðŸ“Š Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        APP NAVIGATION                           â”‚
â”‚  Home | AI Image Editor | Products | Jobs | Templates | ...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROGRESS BAR (Always Visible)                â”‚
â”‚  â— â”€â”€â”€â”€ â—‹ â”€â”€â”€â”€ â—‹ â”€â”€â”€â”€ â—‹ â”€â”€â”€â”€ â—‹                                 â”‚
â”‚  1      2      3      4      5                                  â”‚
â”‚ Select Choose Config Process Review                             â”‚
â”‚ Image   Tool                & Push                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      STEP 1: SELECT IMAGE                       â”‚
â”‚                                                                 â”‚
â”‚  [Product Image 1]  [Product Image 2]  [Product Image 3]       â”‚
â”‚   T-Shirt Blue       Sneakers Red      Jacket Black            â”‚
â”‚                                                                 â”‚
â”‚  [Product Image 4]  [Product Image 5]  [Product Image 6]       â”‚
â”‚   Hat Green          Bag Brown         Sunglasses              â”‚
â”‚                                                                 â”‚
â”‚  â† User clicks an image â†’                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      STEP 2: CHOOSE TOOL                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€ Background & Masking â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ [Background Removal]              1 credit    â”‚            â”‚
â”‚  â”‚ Precisely remove backgrounds...                â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€ Enhancement â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ [Image Enhancement]               1 credit    â”‚            â”‚
â”‚  â”‚ AI-powered quality enhancement...              â”‚            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â”‚ [Photo Retouching]                1 credit    â”‚            â”‚
â”‚  â”‚ Remove blemishes and imperfections...          â”‚            â”‚
â”‚  â”‚                                                 â”‚            â”‚
â”‚  â”‚ [AI Upscaling (4x)]               2 credits   â”‚            â”‚
â”‚  â”‚ Upscale to 4x resolution...                    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€ Color Management â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ [Color Correction]                1 credit    â”‚            â”‚
â”‚  â”‚ Professional color grading...                  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                 â”‚
â”‚  [â† Back]                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ OpenAI?â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        Yes/      \No
                          â”‚        â”‚
                          â–¼        â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  SKIP   â”‚  â”‚  STEP 3: CONFIGURE       â”‚
                    â”‚  TO     â”‚  â”‚                          â”‚
                    â”‚  STEP 4 â”‚  â”‚  Strength:    [===|====] â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               0.8        â”‚
                                 â”‚                          â”‚
                                 â”‚  Face Enhance: [âœ“] On    â”‚
                                 â”‚                          â”‚
                                 â”‚  [â† Back]  [Continue â†’]  â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 4: PROCESSING                           â”‚
â”‚                                                                 â”‚
â”‚                        âŸ³                                        â”‚
â”‚                    (Spinner)                                    â”‚
â”‚                                                                 â”‚
â”‚              Processing Your Image                              â”‚
â”‚           AI is working on your image...                        â”‚
â”‚                                                                 â”‚
â”‚         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘                             â”‚
â”‚                   75% complete                                  â”‚
â”‚                                                                 â”‚
â”‚         Status: Processing... (polling every 2s)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   STEP 5: REVIEW & PUSH                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚   â”‚
â”‚  â”‚  â”‚   ORIGINAL   â”‚  AI PROCESSEDâ”‚                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚   â”‚
â”‚  â”‚  â”‚                              â”‚  â† Draggable Slider   â”‚   â”‚
â”‚  â”‚  â”‚         [Image Split]        â”‚                       â”‚   â”‚
â”‚  â”‚  â”‚                              â”‚                       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  [Upload to Shopify]  [Download]  [Process Another Image]      â”‚
â”‚                                                                 â”‚
â”‚  â† Click "Upload to Shopify" â†’                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SHOPIFY PRODUCT IMAGE UPLOAD                       â”‚
â”‚                                                                 â”‚
â”‚  GraphQL Mutation: productAppendImages                          â”‚
â”‚                                                                 â”‚
â”‚  âœ“ Image uploaded successfully!                                â”‚
â”‚  Toast notification appears                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ State Flow Diagram

```
Initial State:
â””â”€> currentStep = 0
    selectedImage = null
    selectedModel = null
    parameters = {}
    jobId = null

User Selects Image:
â””â”€> selectedImage = "image_url"
    selectedProduct = product_object
    currentStep = 1

User Selects AI Tool:
â””â”€> selectedModel = model_object
    parameters = model.default_parameters
    currentStep = 2 (or 3 if OpenAI)

User Configures Parameters (if not OpenAI):
â””â”€> parameters = { ...updated_params }
    currentStep = 3

User Submits Job:
â””â”€> fetcher.submit({ actionType: "submitJob", ... })
    jobId = response.job.id
    jobStatus = "processing"
    currentStep = 3

Polling Job Status:
â””â”€> Every 2 seconds:
    â””â”€> getJobStatus(jobId)
        â””â”€> If completed:
            â””â”€> resultUrl = job.result_url
                currentStep = 4

User Pushes to Shopify:
â””â”€> fetcher.submit({ actionType: "pushToShopify", ... })
    â””â”€> Success:
        â””â”€> Toast: "Image uploaded!"
            Can download or process another

User Downloads:
â””â”€> Create <a> element
    Set href = resultUrl
    Trigger download

User Processes Another:
â””â”€> Reset all state to initial
    currentStep = 0
```

---

## ðŸŽ¨ Component Hierarchy

```
EditorPage
â”œâ”€â”€ ProgressBar
â”‚   â”œâ”€â”€ Step Circles (1-5)
â”‚   â”œâ”€â”€ Connecting Lines
â”‚   â””â”€â”€ Progress Percentage Bar
â”‚
â”œâ”€â”€ Step 1: ImageSelectionStep
â”‚   â””â”€â”€ ProductImage Grid
â”‚       â”œâ”€â”€ Image Card 1
â”‚       â”œâ”€â”€ Image Card 2
â”‚       â””â”€â”€ Image Card N
â”‚
â”œâ”€â”€ Step 2: ToolSelectionStep
â”‚   â””â”€â”€ Grouped AI Models
â”‚       â”œâ”€â”€ Category 1
â”‚       â”‚   â”œâ”€â”€ Model Card 1
â”‚       â”‚   â””â”€â”€ Model Card 2
â”‚       â”œâ”€â”€ Category 2
â”‚       â”‚   â””â”€â”€ Model Card 3
â”‚       â””â”€â”€ Back Button
â”‚
â”œâ”€â”€ Step 3: ParametersStep
â”‚   â”œâ”€â”€ Parameter Inputs
â”‚   â”‚   â”œâ”€â”€ Slider (for numbers)
â”‚   â”‚   â”œâ”€â”€ Checkbox (for booleans)
â”‚   â”‚   â””â”€â”€ Text Input (for strings)
â”‚   â”œâ”€â”€ Back Button
â”‚   â””â”€â”€ Continue Button
â”‚
â”œâ”€â”€ Step 4: ProcessingStep
â”‚   â”œâ”€â”€ Loading Spinner
â”‚   â”œâ”€â”€ Status Message
â”‚   â”œâ”€â”€ Progress Bar
â”‚   â””â”€â”€ Progress Percentage
â”‚
â””â”€â”€ Step 5: ReviewPushStep
    â”œâ”€â”€ ImageComparisonSlider
    â”‚   â”œâ”€â”€ Original Image (clipped)
    â”‚   â”œâ”€â”€ Processed Image (full)
    â”‚   â””â”€â”€ Draggable Divider
    â”œâ”€â”€ Upload Button
    â”œâ”€â”€ Download Button
    â””â”€â”€ Process Another Button
```

---

## ðŸ“¡ API Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Load Editor
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                          â”‚
     â”‚  loader() function                       â”‚
     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
     â”‚  â”‚ Fetch Shopify Products (GraphQL)â”‚   â”‚
     â”‚  â”‚ GET /graphql                     â”‚   â”‚
     â”‚  â”‚   query getProducts { ... }      â”‚   â”‚
     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
     â”‚                                          â”‚
     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
     â”‚  â”‚ Fetch AI Models                  â”‚   â”‚
     â”‚  â”‚ GET /api/ai-models               â”‚   â”‚
     â”‚  â”‚ (Currently using mock data)      â”‚   â”‚
     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
     â”‚                                          â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Submit Job
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                          â”‚
     â”‚  action({ actionType: "submitJob" })     â”‚
     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
     â”‚  â”‚ POST /api/jobs                   â”‚   â”‚
     â”‚  â”‚ {                                â”‚   â”‚
     â”‚  â”‚   model_id,                      â”‚   â”‚
     â”‚  â”‚   image_url,                     â”‚   â”‚
     â”‚  â”‚   parameters                     â”‚   â”‚
     â”‚  â”‚ }                                â”‚   â”‚
     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
     â”‚                                          â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚  Response: { job: { id, status } }
     â”‚
     â”‚ 3. Poll Job Status (every 2s)
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                          â”‚
     â”‚  useEffect polling loop                  â”‚
     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
     â”‚  â”‚ GET /api/jobs/:id                â”‚   â”‚
     â”‚  â”‚ (Currently simulated)            â”‚   â”‚
     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
     â”‚                                          â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚  Response: { job: { id, status, result_url } }
     â”‚
     â”‚ 4. Upload to Shopify
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                          â”‚
     â”‚  action({ actionType: "pushToShopify" }) â”‚
     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
     â”‚  â”‚ POST /graphql                    â”‚   â”‚
     â”‚  â”‚ mutation productAppendImages {   â”‚   â”‚
     â”‚  â”‚   productId: "...",              â”‚   â”‚
     â”‚  â”‚   images: [{ src, altText }]     â”‚   â”‚
     â”‚  â”‚ }                                â”‚   â”‚
     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
     â”‚                                          â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚  Response: { newImages: [...] }
     â”‚
     â”‚ 5. Show Success
     â””â”€> Toast notification
         "Image uploaded to Shopify!"
```

---

## ðŸŽ¯ Parameter Configuration Logic

```
Parameter Type Detection:
â”œâ”€â”€ typeof value === "number"
â”‚   â””â”€> Render: <input type="range" />
â”‚       â”œâ”€â”€ Display: Current value badge
â”‚       â”œâ”€â”€ Min/Max: Based on parameter name
â”‚       â””â”€â”€ Step: 0.1 (or 1 for scale)
â”‚
â”œâ”€â”€ typeof value === "boolean"
â”‚   â””â”€> Render: <input type="checkbox" />
â”‚       â”œâ”€â”€ Display: Enabled/Disabled label
â”‚       â””â”€â”€ Toggle: onChange handler
â”‚
â””â”€â”€ typeof value === "string"
    â””â”€> Render: <input type="text" />
        â”œâ”€â”€ Display: Text field
        â””â”€â”€ Update: onChange handler

Special Cases:
â”œâ”€â”€ OpenAI Provider
â”‚   â””â”€> Skip parameter step entirely
â”‚       Auto-advance to processing
â”‚
â””â”€â”€ No Parameters
    â””â”€> Show "Ready to Process" message
        Use optimized defaults
```

---

## ðŸ”„ Job Status Polling

```
Job Submission:
â””â”€> jobId = "job_123"
    jobStatus = "processing"
    currentStep = 3

Polling Loop Starts:
â””â”€> useEffect([jobId, jobStatus])
    â”‚
    â””â”€> if (jobStatus === "processing")
        â”‚
        â””â”€> setInterval(async () => {
            â”‚
            â”œâ”€> const job = await getJobStatus(jobId)
            â”‚
            â”œâ”€> setJobStatus(job.status)
            â”‚   setJobProgress(job.progress)
            â”‚
            â””â”€> if (job.status === "completed")
                â”œâ”€> setResultUrl(job.result_url)
                â”œâ”€> setCurrentStep(4)
                â””â”€> clearInterval()
            }, 2000)

Mock Simulation:
â””â”€> Increments progress by 10% every 500ms
    â””â”€> At 90%:
        â””â”€> setTimeout(() => {
            â”œâ”€> setJobStatus("completed")
            â”œâ”€> setResultUrl("https://picsum.photos/...")
            â””â”€> setCurrentStep(4)
            }, 1000)
```

---

## ðŸŽ¨ UI Component Breakdown

### ProgressBar Component
```
Props:
â”œâ”€ steps: Step[]
â””â”€ currentStep: number

Renders:
â”œâ”€ For each step:
â”‚  â”œâ”€ Circle with number/checkmark
â”‚  â”œâ”€ Step label
â”‚  â”œâ”€ Optional description
â”‚  â””â”€ Connecting line (if not last)
â”‚
â””â”€ Progress percentage bar
   â””â”€ Width: (currentStep + 1) / steps.length * 100%
```

### ImageComparisonSlider Component
```
Props:
â”œâ”€ beforeImage: string
â”œâ”€ afterImage: string
â”œâ”€ beforeLabel: string
â””â”€ afterLabel: string

State:
â”œâ”€ sliderPosition: number (0-100)
â””â”€ isDragging: boolean

Renders:
â”œâ”€ After Image (full width)
â”œâ”€ Before Image (clipped to sliderPosition)
â””â”€ Draggable Divider
   â”œâ”€ Vertical line
   â””â”€ Circular handle with âŸ·

Events:
â”œâ”€ onMouseDown â†’ setIsDragging(true)
â”œâ”€ onMouseMove â†’ update sliderPosition
â””â”€ onMouseUp â†’ setIsDragging(false)
```

---

## ðŸ“Š Data Flow

```
Loader Data:
products â”€â”€â”
          â”œâ”€â”€> useLoaderData()
aiModels â”€â”€â”˜     â”‚
                 â”œâ”€â”€> Component State
                 â””â”€â”€> Render UI

User Actions:
Click Image â”€â”€> setSelectedImage() â”€â”€> Next Step
Select Tool â”€â”€> setSelectedModel() â”€â”€> Next Step
Change Param â”€â”€> setParameters() â”€â”€> Update UI
Submit Job â”€â”€> fetcher.submit() â”€â”€> Server Action
                                  â””â”€â”€> Response
                                      â””â”€â”€> Update State

Server Actions:
submitJob â”€â”€> Create Job â”€â”€> Return { job }
pushToShopify â”€â”€> Upload Image â”€â”€> Return { newImages }

Polling:
useEffect â”€â”€> setInterval â”€â”€> getJobStatus()
                          â””â”€â”€> Update Progress
                              â””â”€â”€> If Complete
                                  â””â”€â”€> Show Results
```

---

## ðŸŽ¯ Key Integration Points

1. **Shopify Products** â†’ GraphQL query in loader
2. **AI Models** â†’ Mock data (replace with API call)
3. **Job Processing** â†’ Backend API (currently simulated)
4. **Image Upload** â†’ Shopify GraphQL mutation
5. **Status Polling** â†’ Real-time updates (mocked)

---

This visual guide shows the complete flow from start to finish! ðŸš€
